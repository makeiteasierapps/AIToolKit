<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Component: web</title>
        <!-- Dynamic Resource Loading -->

        <!-- Component Styles -->
        <style>
            /* Global Styles */
            body {
                background-color: #f9f9f9;
                font-family: 'Arial', sans-serif;
                color: #333;
            }

            .game-board {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
                margin: 20px auto;
                max-width: 300px;
            }

            .cell {
                width: 100px;
                height: 100px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2rem;
                border: 2px solid #ccc;
                cursor: pointer;
                transition: background-color 0.3s;
            }

            .cell.x {
                color: blue;
            }

            .cell.o {
                color: red;
            }

            .cell:hover {
                background-color: #e0e0e0;
            }

            .scoreboard {
                text-align: center;
                margin: 20px 0;
            }

            .game-status {
                font-weight: bold;
                text-align: center;
            }
            /* Global Animations */
            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            @keyframes scaleUp {
                from {
                    transform: scale(0.9);
                }
                to {
                    transform: scale(1);
                }
            }
            /* Style Tokens */
            :root {
                --color-background: #f9f9f9;
                --color-text: #333;
                --color-x: blue;
                --color-o: red;
                --color-border: #ccc;
                --color-hover: #e0e0e0;
                --font-family: 'Arial', sans-serif;
                --font-size-large: 2rem;
                --spacing-small: 10px;
                --spacing-medium: 20px;
            }
            /* Responsive Strategy */
            @media (max-width: 600px) {
                .game-board {
                    grid-template-columns: repeat(3, 1fr);
                    max-width: 90%;
                }

                .cell {
                    width: 80px;
                    height: 80px;
                    font-size: 1.5rem;
                }

                .scoreboard,
                .game-status {
                    font-size: 1.2rem;
                }
            }

            /* Game Board */
            .game-board {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: repeat(3, 1fr);
                gap: var(--spacing-small);
                background-color: var(--color-background);
                border: 2px solid var(--color-border);
                padding: var(--spacing-medium);
                font-family: var(--font-family);
                font-size: var(--font-size-large);
            }

            .game-cell {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 100%;
                height: 100%;
                border: 1px solid var(--color-border);
                cursor: pointer;
                transition: background-color 0.3s ease;
            }

            .game-cell:hover {
                background-color: var(--color-hover);
            }

            .x-mark {
                color: var(--color-x);
                font-size: 3rem;
            }

            .o-mark {
                color: var(--color-o);
                font-size: 3rem;
            }

            /* Scoreboard */
            .scoreboard {
                background-color: var(--color-background);
                color: var(--color-text);
                font-family: var(--font-family);
                font-size: var(--font-size-large);
                padding: var(--spacing-medium);
                border: 1px solid var(--color-border);
                border-radius: 5px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .scoreboard .player-x {
                color: var(--color-x);
            }

            .scoreboard .player-o {
                color: var(--color-o);
            }

            .scoreboard .status {
                font-weight: bold;
            }

            .scoreboard:hover {
                background-color: var(--color-hover);
            }

            /* Reset Button */
            #reset-button {
                background-color: var(--color-background);
                color: var(--color-text);
                border: 2px solid var(--color-border);
                border-radius: 5px;
                font-family: var(--font-family);
                font-size: var(--font-size-large);
                padding: var(--spacing-small) var(--spacing-medium);
                cursor: pointer;
                transition: background-color 0.3s ease, transform 0.2s ease;
            }

            #reset-button:hover {
                background-color: var(--color-hover);
            }

            #reset-button:active {
                transform: scale(0.95);
            }

            /* Game Status */
            #game-status {
                background-color: var(--color-background);
                color: var(--color-text);
                font-family: var(--font-family);
                font-size: var(--font-size-large);
                padding: var(--spacing-medium);
                border: 1px solid var(--color-border);
                border-radius: 5px;
                text-align: center;
                margin-bottom: var(--spacing-medium);
            }

            #game-status .turn {
                font-weight: bold;
            }

            #game-status .winner {
                color: var(--color-x);
            }

            #game-status .draw {
                color: var(--color-o);
            }
        </style>
    </head>
    <body>
        <!-- Component Container -->
        <div id="component-root">
            <section
                id="game-board"
                class="game-board"
                role="grid"
                aria-label="Tic Tac Toe Game Board"
            >
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 0-0"
                    data-index="0-0"
                ></div>
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 0-1"
                    data-index="0-1"
                ></div>
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 0-2"
                    data-index="0-2"
                ></div>
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 1-0"
                    data-index="1-0"
                ></div>
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 1-1"
                    data-index="1-1"
                ></div>
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 1-2"
                    data-index="1-2"
                ></div>
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 2-0"
                    data-index="2-0"
                ></div>
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 2-1"
                    data-index="2-1"
                ></div>
                <div
                    class="game-cell"
                    role="gridcell"
                    tabindex="0"
                    aria-label="Cell 2-2"
                    data-index="2-2"
                ></div>
            </section>
            <div
                id="scoreboard"
                class="scoreboard"
                role="status"
                aria-live="polite"
            >
                <div class="player-x" aria-label="Player 1 score">
                    Player 1: <span id="score-x">0</span>
                </div>
                <div class="status" aria-label="Current turn">
                    | Current Turn: <span id="current-player">X</span>
                </div>
                <div class="player-o" aria-label="Player 2 score">
                    Player 2: <span id="score-o">0</span>
                </div>
            </div>
            <div
                id="reset-button"
                role="button"
                tabindex="0"
                aria-label="Reset Game"
                onclick="resetGame()"
                onkeypress="if(event.key === 'Enter') resetGame()"
            >
                Reset Game
            </div>
            <div id="game-status" role="status" aria-live="polite">
                <p class="turn">
                    Current turn: <span id="current-player">X</span>
                </p>
                <p class="winner" aria-hidden="true"></p>
                <p class="draw" aria-hidden="true"></p>
            </div>
        </div>
        <!-- Dynamic Script Loading -->

        <!-- Component Scripts -->

        <script>
            const imagePlaceholders = {
                'game board-game_board': {
                    alt: '3x3 Tic Tac Toe game board with a light background and contrasting colors for X and O.',
                    prompt: 'A clean and minimalistic Tic Tac Toe game board featuring a 3x3 grid. The grid should have a light background, with blue squares for X and red squares for O. The design should be simple and user-friendly, emphasizing clarity and ease of interaction.',
                    dimensions: '300x300',
                    position: 'center',
                    style_focus: 'minimalistic design, contrasting colors',
                    purpose:
                        'to display the game board for players to place their marks',
                    content_strategy:
                        'ensure clarity and ease of use for an engaging gameplay experience',
                },
                'scoreboard-scoreboard_background': {
                    alt: 'Light background for scoreboard',
                    prompt: 'A clean and minimalistic light background suitable for a scoreboard display.',
                    dimensions: '800x200',
                    position: 'top',
                    style_focus: 'minimalistic design',
                    purpose: 'to provide a clear display area for scores',
                    content_strategy: 'ensure high contrast with score text',
                },
                'scoreboard-score_x': {
                    alt: 'Score display for player X',
                    prompt: 'A scoreboard element displaying the score for player X in blue.',
                    dimensions: '200x100',
                    position: 'left',
                    style_focus: 'bold typography',
                    purpose: "to show player X's current score",
                    content_strategy: "highlight player X's score prominently",
                },
                'scoreboard-score_o': {
                    alt: 'Score display for player O',
                    prompt: 'A scoreboard element displaying the score for player O in red.',
                    dimensions: '200x100',
                    position: 'right',
                    style_focus: 'bold typography',
                    purpose: "to show player O's current score",
                    content_strategy: "highlight player O's score prominently",
                },
                'scoreboard-turn_indicator': {
                    alt: 'Current turn indicator',
                    prompt: 'An indicator showing whose turn it is, with a simple design.',
                    dimensions: '400x100',
                    position: 'center',
                    style_focus: 'clear and concise',
                    purpose: 'to inform players whose turn it is',
                    content_strategy:
                        'use simple text to indicate current player',
                },
                'reset button-reset_button': {
                    alt: 'Reset Game Button',
                    prompt: 'A clean and minimalistic reset button for a Tic Tac Toe game, designed with a light background and contrasting colors. The button should be visually distinct, easy to identify, and located near the scoreboard.',
                    dimensions: '100x50',
                    position: 'near scoreboard',
                    style_focus: 'minimalistic design, contrasting colors',
                    purpose: 'to allow players to reset the game easily',
                    content_strategy:
                        'ensure clarity and accessibility in design',
                },
                'game status-game_status_display': {
                    alt: 'Current game status display showing whose turn it is and the game outcome.',
                    prompt: "A minimalistic scoreboard displaying the current player's turn and game outcome (win, draw). Use a light background with contrasting colors for X (blue) and O (red). Simple typography for clarity.",
                    dimensions: '300x100',
                    position: 'above the game board',
                    style_focus: 'clean and minimalistic design',
                    purpose: 'to inform players of the current game status',
                    content_strategy:
                        'ensure clarity and ease of understanding',
                },
            };
            function loadGeneratedImage(imageId, imageUrl) {
                const placeholder = document.querySelector(
                    `[data-image-id="${imageId}"]`
                );
                if (placeholder) {
                    const img = new Image();
                    img.src = imageUrl;
                    img.alt = imagePlaceholders[imageId].alt;
                    img.className = 'generated-image';
                    img.onload = () => {
                        placeholder.querySelector(
                            '.loading-indicator'
                        ).style.display = 'none';
                        placeholder.appendChild(img);
                        img.style.opacity = '1';
                    };
                }
            }
            // Function to be called when images are generated
            window.updateGeneratedImages = function (imageMapping) {
                Object.entries(imageMapping).forEach(([imageId, imageUrl]) => {
                    loadGeneratedImage(imageId, imageUrl);
                });
            };
        </script>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Global State Management

                // Game Board State Management
                let currentPlayer = 'X'; // X starts first
                let gameBoard = Array(3)
                    .fill(null)
                    .map(() => Array(3).fill(null));
                let gameStatus = 'ongoing'; // can be 'ongoing', 'win', or 'draw'

                // Function to handle player moves
                function handlePlayerMove(index) {
                    const [row, col] = index.split('-').map(Number);
                    if (
                        gameBoard[row][col] === null &&
                        gameStatus === 'ongoing'
                    ) {
                        gameBoard[row][col] = currentPlayer;
                        updateBoard(index, currentPlayer);
                        if (checkGameStatus()) {
                            gameStatus = 'win'; // or 'draw' based on the check
                        } else {
                            currentPlayer = currentPlayer === 'X' ? 'O' : 'X'; // Switch player
                        }
                    }
                }

                // Scoreboard State Management
                // State management for the scoreboard
                let player1Score = 0;
                let player2Score = 0;
                let currentPlayer = 'Player 1';

                // Function to reset scores
                function resetScores() {
                    player1Score = 0;
                    player2Score = 0;
                    currentPlayer = 'Player 1';
                    updateScoreboard(player1Score, player2Score, currentPlayer);
                }

                // Function to update scores based on game outcome
                function updateScores(winner) {
                    if (winner === 'Player 1') {
                        player1Score++;
                    } else if (winner === 'Player 2') {
                        player2Score++;
                    }
                    updateScoreboard(player1Score, player2Score, currentPlayer);
                }

                // Reset Button State Management
                let gameState = {
                    currentPlayer: 'X',
                    board: Array(9).fill(null),
                    scores: { X: 0, O: 0 },
                    status: 'ongoing', // can be 'ongoing', 'win', or 'draw'
                };

                function updateScoreboard(scoreX, scoreO) {
                    gameState.scores.X = scoreX;
                    gameState.scores.O = scoreO;
                    document.getElementById('scoreX').textContent = scoreX;
                    document.getElementById('scoreO').textContent = scoreO;
                }

                // Game Status State Management
                // State management for the game
                let gameState = {
                    currentPlayer: 'X',
                    board: Array(9).fill(null),
                    gameStatus: 'ongoing', // can be 'ongoing', 'win', or 'draw'
                };

                // Function to switch players
                function switchPlayer() {
                    gameState.currentPlayer =
                        gameState.currentPlayer === 'X' ? 'O' : 'X';
                }

                // Function to reset the game state
                function resetGame() {
                    gameState = {
                        currentPlayer: 'X',
                        board: Array(9).fill(null),
                        gameStatus: 'ongoing',
                    };
                    updateGameStatus(
                        gameState.currentPlayer,
                        gameState.gameStatus
                    );
                }

                // Section-specific Logic

                // Game Board Section Logic
                // Function to initialize the game board
                function initializeBoard() {
                    const board = document.getElementById('game-board');
                    for (let i = 0; i < 3; i++) {
                        for (let j = 0; j < 3; j++) {
                            const cell = document.createElement('div');
                            cell.classList.add('cell');
                            cell.dataset.index = `${i}-${j}`;
                            board.appendChild(cell);
                        }
                    }
                }

                // Function to update the board with the player's mark
                function updateBoard(index, playerMark) {
                    const cell = document.querySelector(
                        `.cell[data-index='${index}']`
                    );
                    if (cell && !cell.textContent) {
                        cell.textContent = playerMark;
                    }
                }

                // Function to check for a win or draw
                function checkGameStatus() {
                    // Logic to check rows, columns, and diagonals for a win
                    // Logic to check for a draw
                }

                // Scoreboard Section Logic
                // Function to update the scoreboard display
                function updateScoreboard(
                    player1Score,
                    player2Score,
                    currentPlayer
                ) {
                    const scoreboardElement =
                        document.getElementById('scoreboard');
                    scoreboardElement.innerHTML = `Player 1: ${player1Score} - Player 2: ${player2Score} | Current Turn: ${currentPlayer}`;
                }

                // Reset Button Section Logic
                document
                    .getElementById('resetButton')
                    .addEventListener('click', function () {
                        resetGame();
                    });

                function resetGame() {
                    // Clear the game board
                    const cells = document.querySelectorAll('.game-cell');
                    cells.forEach((cell) => {
                        cell.textContent = '';
                        cell.classList.remove('occupied');
                    });

                    // Reset scores
                    updateScoreboard(0, 0);

                    // Notify other components of the reset
                    document.dispatchEvent(new CustomEvent('gameReset'));
                }

                // Game Status Section Logic
                // Function to update the game status display
                function updateGameStatus(currentPlayer, gameOutcome) {
                    const statusElement =
                        document.getElementById('game-status');
                    if (gameOutcome === 'win') {
                        statusElement.textContent = `${currentPlayer} wins!`;
                    } else if (gameOutcome === 'draw') {
                        statusElement.textContent = "It's a draw!";
                    } else {
                        statusElement.textContent = `Current turn: ${currentPlayer}`;
                    }
                }

                // Event Delegations

                // Game Board Event Delegation
                document
                    .getElementById('game-board')
                    .addEventListener('click', (event) => {
                        if (event.target.classList.contains('cell')) {
                            const index = event.target.dataset.index;
                            handlePlayerMove(index);
                        }
                    });

                // Reset button event listener
                document
                    .getElementById('reset-button')
                    .addEventListener('click', () => {
                        resetGame();
                    });

                function resetGame() {
                    gameBoard = Array(3)
                        .fill(null)
                        .map(() => Array(3).fill(null));
                    currentPlayer = 'X';
                    gameStatus = 'ongoing';
                    initializeBoard();
                }

                // Scoreboard Event Delegation
                // Event delegation for handling game events
                document.addEventListener('gameEvent', function (event) {
                    switch (event.detail.type) {
                        case 'Player Move':
                            // Logic to handle player move and update scoreboard
                            currentPlayer =
                                currentPlayer === 'Player 1'
                                    ? 'Player 2'
                                    : 'Player 1';
                            break;
                        case 'Game Reset':
                            resetScores();
                            break;
                    }
                });

                // Reset Button Event Delegation
                document
                    .getElementById('gameBoard')
                    .addEventListener('click', function (event) {
                        if (
                            event.target.classList.contains('game-cell') &&
                            !event.target.classList.contains('occupied')
                        ) {
                            const cellIndex = Array.from(
                                event.target.parentNode.children
                            ).indexOf(event.target);
                            gameState.board[cellIndex] =
                                gameState.currentPlayer;
                            event.target.textContent = gameState.currentPlayer;
                            event.target.classList.add('occupied');

                            // Check for win or draw
                            checkGameStatus();

                            // Switch players
                            gameState.currentPlayer =
                                gameState.currentPlayer === 'X' ? 'O' : 'X';
                        }
                    });

                // Game Status Event Delegation
                // Event delegation for handling player moves
                document
                    .getElementById('game-board')
                    .addEventListener('click', function (event) {
                        const index = event.target.dataset.index; // Assuming each cell has a data-index attribute
                        if (
                            gameState.board[index] === null &&
                            gameState.gameStatus === 'ongoing'
                        ) {
                            gameState.board[index] = gameState.currentPlayer;
                            const winner = checkForWinner(); // Function to check for a winner
                            if (winner) {
                                gameState.gameStatus = 'win';
                                updateGameStatus(
                                    gameState.currentPlayer,
                                    gameState.gameStatus
                                );
                            } else if (
                                gameState.board.every((cell) => cell !== null)
                            ) {
                                gameState.gameStatus = 'draw';
                                updateGameStatus(
                                    gameState.currentPlayer,
                                    gameState.gameStatus
                                );
                            } else {
                                switchPlayer();
                                updateGameStatus(
                                    gameState.currentPlayer,
                                    gameState.gameStatus
                                );
                            }
                        }
                    });

                // Section APIs

                // Combined Section APIs
                const componentAPI = {};
            });
        </script>
    </body>
</html>
